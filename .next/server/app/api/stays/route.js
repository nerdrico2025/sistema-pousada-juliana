"use strict";(()=>{var e={};e.id=228,e.ids=[228],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9275:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>y,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>x,staticGenerationAsyncStorage:()=>v});var r={};a.r(r),a.d(r,{POST:()=>c,dynamic:()=>d});var s=a(9303),o=a(8716),n=a(670),i=a(7070),u=a(3524);let d="force-dynamic",p=new u.PrismaClient;async function c(e){try{let{guestId:t,dataEntrada:a,dataSaida:r,observacoes:s}=await e.json();if(!t||!a||!r)return i.NextResponse.json({error:"Guest ID, data de entrada e data de sa\xedda s\xe3o obrigat\xf3rios"},{status:400});if(!await p.guest.findUnique({where:{id:t}}))return i.NextResponse.json({error:"H\xf3spede n\xe3o encontrado"},{status:404});await p.stay.updateMany({where:{guestId:t,status:"ativo"},data:{status:"finalizado"}});let o=await p.stay.create({data:{guestId:t,dataEntrada:new Date(a),dataSaida:new Date(r),status:"ativo",observacoes:s||"Nova estadia"},include:{guest:!0}});return i.NextResponse.json(o,{status:201})}catch(e){return console.error("Erro ao criar nova estadia:",e),i.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/stays/route",pathname:"/api/stays",filename:"route",bundlePath:"app/api/stays/route"},resolvedPagePath:"/home/project/app/api/stays/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:v,serverHooks:x}=l,y="/api/stays/route";function h(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:v})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,972],()=>a(9275));module.exports=r})();